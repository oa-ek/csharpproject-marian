@model TeamManager.Repository.Models.UserListItemModel

@{
    ViewData["Title"] = "Delete User";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@ViewData["Title"]</h2>

<h3>Are you sure you want to delete this user?</h3>
<div>
    <h4>Username:</h4>
    <p>@Model.FullName</p>

    <form id="deleteForm">
        <input type="hidden" asp-for="Id" />
        <button type="submit" class="btn btn-danger">Delete</button>
        <a asp-action="Index" class="btn btn-secondary">Cancel</a>
    </form>
</div>

@section Scripts {
    <script>
        $(function () {
            $('#deleteForm').submit(function (e) {
                e.preventDefault();
                var userId = $(this).find('input[name="Id"]').val();
                $.ajax({
                    url: '/User/Delete/' + userId,
                    type: 'DELETE',
                    success: function () {
                        window.location.href = '/User/Index';
                    },
                    error: function () {
                        alert('An error occurred while deleting the user.');
                    }
                });
            });
        });
    </script>
}
